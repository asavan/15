(function(r,k){function s(a,e,g){var f=e.x-a.x,a=e.y-a.y;return Math.abs(f)+Math.abs(a)<(g||30)?m:Math.abs(f)>Math.abs(a)?0>f?h:l:0>a?n:o}function t(a){var e={};e.x=a.pageX||a.clientX;e.y=a.pageY||a.clientY;return e}function u(a){a.preventDefault();v=a.target.outerText;a=t(a.changedTouches[0]);p.push(a)}function w(a){a.preventDefault();a=a.changedTouches;a=t(a[a.length-1]);a=s(p[0],a);j.bigGo(a,v)&&q();p=[]}function q(){for(var a=0,e;e=g.childNodes[a],16>a;a++){var h=j.getElement(a);e.textContent=
h;e.style.visibility=h?"visible":"hidden"}if(j.isCompleted())g.style.backgroundColor="red",r.removeEventListener("keydown",x),g.removeEventListener("touchstart",u),g.removeEventListener("touchend",w)}function x(a){j.go({39:h,37:l,40:n,38:o}[a.keyCode])&&q()}for(var h="left",l="right",n="up",o="down",m="",j=function(){var a=[],e=function(b){for(var c=0;16>c;++c)if(a[c]===+b)return c;return-1},g=function(a){var c={};c.x=a%4;c.y=Math.floor(a/4);return c},f=15,j=function(b){if(!b||b===m)b=!1;else{var c=
f,d;d=b===n?-4:b===o?4:b===h?-1:b===l?1:0;c+=d;0>c||15<c||(b===h||b===l)&&Math.floor(f/4)!==Math.floor(c/4)?b=!1:(b=f,d=a[c],a[c]=a[b],a[b]=d,f=c,b=!0)}return b};(function(){a=[];for(var b=1;16>b;++b)a.push(b);for(var b=a,c=b.length;0<c;){var d=Math.floor(Math.random()*c);c--;var e=b[c];b[c]=b[d];b[d]=e}a.push(0);b=0;c=1;for(d=a.length-1;c<d;c++)for(e=c-1;0<=e;e--)a[e]>a[c]&&++b;b%2&&(b=a[0],a[0]=a[1],a[1]=b)})();return{go:j,bigGo:function(a,c){var d=e(c),f=g(d),d=e(0),i=g(d),d=i.y-f.y,d=0!==i.x-
f.x&&0!==d?m:s(f,i,1);if(a===d&&d!==m){f=Math.abs(i.x-f.x+i.y-f.y);for(i=0;i<f;++i){var k;k=d===h?l:d===l?h:d===n?o:d===o?n:m;j(k)}return!0}return!1},isCompleted:function(){return!a.some(function(a,c){return 0<a&&a-1!==c})},getElement:function(b){return a[b]}}}(),p=[],v="",g=k.body.appendChild(k.createElement("div")),y=0;16>y;y++)g.appendChild(k.createElement("div"));r.addEventListener("keydown",x);g.addEventListener("touchstart",u,!1);g.addEventListener("touchend",w,!1);q()})(window,document);