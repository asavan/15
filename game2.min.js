(function(r,e){function s(a,g,i){var d=g.x-a.x,a=g.y-a.y;return Math.abs(d)+Math.abs(a)<(i||30)?k:Math.abs(d)>Math.abs(a)?0>d?l:m:0>a?o:p}function t(a){var g={};g.x=a.pageX||a.clientX;g.y=a.pageY||a.clientY;return g}function q(){for(var a=0,g;g=d.childNodes[a],16>a;a++){var i=j.getElement(a);g.textContent=i;g.style.visibility=i?"visible":"hidden"}if(j.isCompleted())d.style.backgroundColor="red",r.removeEventListener("keydown",u),d.removeEventListener("touchstart",v),d.removeEventListener("touchend",
w),navigator.vibrate([500,200,500])}function u(a){j.go(function(a){var d=e.getElementById("log");if(d)d.innerHTML=a+"\n"+d.innerHTML;console.log(a);switch(a){case 37:case 72:return l;case 39:case 76:return m;case 38:case 75:return o;case 40:case 74:return p;default:return k}}(a.keyCode))&&q()}var l="left",m="right",o="up",p="down",k="",j=function(){var a=[],d=function(b){for(var c=0;16>c;++c)if(a[c]===+b)return c;return-1},i=function(a){var c={};c.x=a%4;c.y=Math.floor(a/4);return c},e=15,j=function(b){if(!b||
b===k)b=!1;else{var c=e,d;d=b===o?4:b===p?-4:b===l?1:b===m?-1:0;c+=d;0>c||15<c||(b===l||b===m)&&Math.floor(e/4)!==Math.floor(c/4)?b=!1:(b=e,d=a[c],a[c]=a[b],a[b]=d,e=c,b=!0)}return b};(function(){a=[];for(var b=1;16>b;++b)a.push(b);for(var b=a,c=b.length;0<c;){var d=Math.floor(Math.random()*c);c--;var f=b[c];b[c]=b[d];b[d]=f}a.push(0);b=0;c=1;for(d=a.length-1;c<d;c++)for(f=c-1;0<=f;f--)a[f]>a[c]&&++b;b%2&&(b=a[0],a[0]=a[1],a[1]=b)})();return{go:j,bigGo:function(a,c){var e=d(c),e=i(e),f=d(0),h=i(f),
f=h.y-e.y,f=0!==h.x-e.x&&0!==f?k:s(e,h,1);if(a===f&&f!==k){e=Math.abs(h.x-e.x+h.y-e.y);for(h=0;h<e;++h)j(f);return!0}return!1},isCompleted:function(){return!a.some(function(a,c){return 0<a&&a-1!==c})},getElement:function(b){return a[b]}}}(),n=[],x="",v=function(a){a.preventDefault();x=a.target.textContent;a=t(a.changedTouches[0]);n.push(a)},w=function(a){if(!(1>n.length))a.preventDefault(),a=a.changedTouches,a=t(a[a.length-1]),a=s(n[0],a),j.bigGo(a,x)&&q(),n=[]},d=e.body.appendChild(e.createElement("div"));
d.className="box";for(var y=0;16>y;y++)d.appendChild(e.createElement("div"));r.addEventListener("keydown",u);d.addEventListener("touchstart",v,!1);d.addEventListener("touchend",w,!1);q()})(window,document);