(function(r,h){function s(a,e,g){var f=e.x-a.x,a=e.y-a.y;return Math.abs(f)+Math.abs(a)<(g||30)?m:Math.abs(f)>Math.abs(a)?0>f?k:l:0>a?n:o}function t(a){var e={};e.x=a.pageX||a.clientX;e.y=a.pageY||a.clientY;return e}for(var k="left",l="right",n="up",o="down",m="",j=function(){var a=[],e=function(b){for(var c=0;16>c;++c)if(a[c]===parseInt(b))return c;return-1},g=function(a){var c={};c.x=a%4;c.y=Math.floor(a/4);return c},f=15,j=function(b){if(!b||b===m)b=!1;else{var c=f,d;d=b===n?-4:b===o?4:b===k?-1:
b===l?1:0;c+=d;0>c||15<c||(b===k||b===l)&&Math.floor(f/4)!==Math.floor(c/4)?b=!1:(b=f,d=a[c],a[c]=a[b],a[b]=d,f=c,b=!0)}return b};(function(){a=[];for(var b=1;16>b;++b)a.push(b);for(var b=a,c=b.length;0<c;){var d=Math.floor(Math.random()*c);c--;var e=b[c];b[c]=b[d];b[d]=e}a.push(0);b=0;c=1;for(d=a.length-1;c<d;c++)for(e=c-1;0<=e;e--)a[e]>a[c]&&++b;b%2&&(b=a[0],a[0]=a[1],a[1]=b)})();return{go:j,bigGo:function(a,c){var d=e(c),f=g(d),d=e(0),i=g(d),d=i.y-f.y,d=0!==i.x-f.x&&0!==d?m:s(f,i,1);if(a===d&&
d!==m){f=Math.abs(i.x-f.x+i.y-f.y);for(i=0;i<f;++i){var h;h=d===k?l:d===l?k:d===n?o:d===o?n:m;j(h)}return!0}return!1},isCompleted:function(){return!a.some(function(a,c){return 0<a&&a-1!==c})},getElement:function(b){return a[b]}}}(),p=[],u="",g=h.body.appendChild(h.createElement("div")),v=0;16>v;v++)g.appendChild(h.createElement("div"));var q=function(){for(var a=0,e;e=g.childNodes[a],16>a;a++){var h=j.getElement(a);e.textContent=h;e.style.visibility=h?"visible":"hidden"}if(j.isCompleted())g.style.backgroundColor=
"red",r.removeEventListener("keydown",w),g.removeEventListener("touchstart",x),g.removeEventListener("touchend",y)},w=function(a){j.go({39:k,37:l,40:n,38:o}[a.keyCode])&&q()},x=function(a){a.preventDefault();u=a.target.outerText;a=t(a.changedTouches[0]);p.push(a)},y=function(a){a.preventDefault();a=a.changedTouches;a=t(a[a.length-1]);a=s(p[0],a);j.bigGo(a,u)&&q();p=[]};r.addEventListener("keydown",w);g.addEventListener("touchstart",x,!1);g.addEventListener("touchend",y,!1);q()})(window,document);