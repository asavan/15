(function(s,j){function t(a){var b={};b.x=a.pageX||a.clientX;b.y=a.pageY||a.clientY;return b}function u(a){a.preventDefault();v=a.target.outerText;a=t(a.changedTouches[0]);q.push(a)}function w(a){a.preventDefault();var a=a.changedTouches,b=t(a[a.length-1]),i=q[0],a=b.x-i.x,b=b.y-i.y,a=30>Math.abs(a)+Math.abs(b)?k:Math.abs(a)>Math.abs(b)?0>a?l:m:0>b?n:o;d.bigGo(a,v)&&r();q=[]}function r(){for(var a=0,b;b=h.childNodes[a],16>a;a++){var i=d.getElement(a);b.textContent=i;b.style.visibility=i?"visible":
"hidden"}if(d.isCompleted())h.style.backgroundColor="red",s.removeEventListener("keydown",x),h.removeEventListener("touchstart",u),h.removeEventListener("touchend",w)}var l="left",m="right",n="up",o="down",k="none",d=function(){var a={up:-4,left:-1,down:4,right:1},b=[],i=function(c){for(var a=0;16>a;++a)if(b[a]===parseInt(c))return a;return-1},h=function(c){var a={};a.x=c%4;a.y=Math.floor(c/4);return a},d=15,j=function(c){if(!c||c===k)c=!1;else{var f=a[c],c=d+f;if(0>c||15<c||(f===a.left||f===a.right)&&
Math.floor(d/4)!==Math.floor(c/4))c=!1;else{var f=d,g=b[c];b[c]=b[f];b[f]=g;d=c;c=!0}}return c};return{init:function(){for(var a=1;16>a;++a)b.push(a);for(a=b.length;0<a;){var f=Math.floor(Math.random()*a);a--;var g=b[a];b[a]=b[f];b[f]=g}b.push(0);a=0;f=1;for(g=b.length-1;f<g;f++)for(var e=f-1;0<=e;e--)b[e]>b[f]&&++a;a%2&&(a=b[0],b[0]=b[1],b[1]=a)},go:j,bigGo:function(a,b){var g=i(b),g=h(g),e=i(0),d=h(e),e=d.x-g.x,p=d.y-g.y,e=0<Math.abs(e)&&0<Math.abs(p)?k:0<Math.abs(e)?0>e?l:m:0>p?n:o;if(a===e&&e!==
k){g=Math.abs(d.x-g.x+d.y-g.y);for(d=0;d<g;++d)p=e===l?m:e===m?l:e===n?o:e===o?n:k,j(p);return!0}return!1},isCompleted:function(){return!b.some(function(a,b){return 0<a&&a-1!==b})},getElement:function(a){return b[a]}}}();d.init();for(var q=[],v="",h=j.body.appendChild(j.createElement("div")),y=0;16>y;y++)h.appendChild(j.createElement("div"));var x=function(a){d.go({39:"left",37:"right",40:"up",38:"down"}[a.keyCode])&&r()};s.addEventListener("keydown",x);h.addEventListener("touchstart",u,!1);h.addEventListener("touchend",
w,!1);r()})(window,document);